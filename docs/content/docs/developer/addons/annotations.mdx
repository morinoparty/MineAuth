---
title: Annotation Reference
description: Complete reference for all annotations available in MineAuth API
---

This document provides a comprehensive reference for all annotations available in the MineAuth API.

## HTTP Method Annotations

These annotations define the HTTP method and path for your endpoint methods.

### @GetMapping

Defines a GET request endpoint.

```kotlin
@GetMapping("/users")
suspend fun listUsers(): List<UserData>

@GetMapping("/users/{id}")
suspend fun getUser(@PathParam("id") id: String): UserData?
```

| Parameter | Type | Description |
|-----------|------|-------------|
| `value` | String | The URL path for the endpoint |

### @PostMapping

Defines a POST request endpoint.

```kotlin
@PostMapping("/users")
suspend fun createUser(@RequestBody user: CreateUserRequest): UserData
```

### @PutMapping

Defines a PUT request endpoint.

```kotlin
@PutMapping("/users/{id}")
suspend fun updateUser(
    @PathParam("id") id: String,
    @RequestBody user: UpdateUserRequest
): UserData
```

### @DeleteMapping

Defines a DELETE request endpoint.

```kotlin
@DeleteMapping("/users/{id}")
suspend fun deleteUser(@PathParam("id") id: String)
```

---

## Parameter Annotations

These annotations extract data from the HTTP request.

### @PathParam

Extracts a single path parameter.

```kotlin
@GetMapping("/shops/{shopId}")
suspend fun getShop(@PathParam("shopId") shopId: String): ShopData?
```

| Parameter | Type | Description |
|-----------|------|-------------|
| `value` | String | The name of the path parameter to extract |

**Supported Types:**
- `String`
- `Int`
- `Long`
- `Double`
- `Float`
- `Boolean`
- `UUID`

### @QueryParams

Extracts all query parameters as a Map.

```kotlin
@GetMapping("/shops")
suspend fun searchShops(
    @QueryParams params: Map<String, String>
): List<ShopData> {
    val limit = params["limit"]?.toIntOrNull() ?: 10
    val offset = params["offset"]?.toIntOrNull() ?: 0
    val search = params["search"]
    // ...
}
```

### @RequestBody

Extracts and deserializes the JSON request body.

```kotlin
@PostMapping("/shops")
suspend fun createShop(@RequestBody shop: CreateShopRequest): ShopData

// Data class must be @Serializable
@Serializable
data class CreateShopRequest(
    val name: String,
    val price: Double,
    val quantity: Int
)
```

---

## Authentication Annotations

These annotations handle authentication and authorization.

### @TargetPlayer

Resolves a player from a `{player}` path parameter. The parameter accepts `me` (authenticated user), a UUID, or a player name. Requires authentication.

```kotlin
@GetMapping("/balance/{player}")
suspend fun getBalance(@TargetPlayer player: OfflinePlayer): BalanceData {
    return economyService.getBalance(player.uniqueId)
}
```

| `{player}` value | Behavior |
|-------------------|----------|
| `me` | Resolves to the authenticated player (user tokens only) |
| UUID format | Resolves to the player with that UUID |
| Player name | Resolves to the player with that name |

**Access control:**
- User tokens can only resolve to themselves (`me`, own UUID, or own name)
- Service tokens can resolve to any player but cannot use `me`

See [Authentication Guide](/docs/developer/addons/authentication) for details.

### @AuthedAccessUser

Requires authentication and injects the authenticated `OfflinePlayer`. Used for endpoints where the user performs actions on their own data (e.g., sending money, changing settings).

```kotlin
@PostMapping("/send")
suspend fun sendMoney(
    @AuthedAccessUser player: OfflinePlayer,
    @RequestBody data: RemittanceData
): TransferResult {
    return economyService.transfer(player.uniqueId, data)
}
```

:::warning[Service Account Restriction]
This annotation is only available with user tokens. Service accounts cannot access `@AuthedAccessUser` endpoints.
:::

### @AccessUser

Optional authentication. Returns `null` if no valid JWT is provided.

```kotlin
@GetMapping("/items")
suspend fun listItems(@AccessUser player: OfflinePlayer?): List<ItemData> {
    return if (player != null) {
        // Show personalized items
        itemService.findForUser(player.uniqueId)
    } else {
        // Show public items
        itemService.findPublic()
    }
}
```

### @Permission

Specifies required permissions. Can be applied at class or method level.

```kotlin
// Class-level: applies to all methods
@Permission("myshop.admin")
class AdminHandler {

    @GetMapping("/stats")
    suspend fun getStats(): StatsData {
        // Requires "myshop.admin"
    }

    // Method-level overrides class-level
    @GetMapping("/public-stats")
    @Permission("myshop.view")
    suspend fun getPublicStats(): StatsData {
        // Only requires "myshop.view"
    }
}
```

| Parameter | Type | Description |
|-----------|------|-------------|
| `value` | String | The permission string required |

:::tip[Service Account Behavior]
Service accounts automatically bypass `@Permission` checks. Business logic validation (e.g., ownership checks) in handler code is still applied.
:::

---

## Annotation Usage Summary

| Annotation | Target | Description |
|------------|--------|-------------|
| `@GetMapping` | Function | Define GET endpoint |
| `@PostMapping` | Function | Define POST endpoint |
| `@PutMapping` | Function | Define PUT endpoint |
| `@DeleteMapping` | Function | Define DELETE endpoint |
| `@PathParam` | Parameter | Extract path parameter |
| `@QueryParams` | Parameter | Extract query parameters |
| `@RequestBody` | Parameter | Extract JSON body |
| `@TargetPlayer` | Parameter | Resolve player from `{player}` path param (supports me/UUID/name) |
| `@AuthedAccessUser` | Parameter | Require auth, inject OfflinePlayer (user tokens only) |
| `@AccessUser` | Parameter | Optional auth, inject nullable OfflinePlayer |
| `@Permission` | Class/Function | Require permission (bypassed by service accounts) |

## Choosing the Right Authentication Annotation

```
Do you need to access player data?
├── Yes → Is this a read-only endpoint?
│   ├── Yes → Should service accounts access any player?
│   │   ├── Yes → Use @TargetPlayer with /{player} path
│   │   └── No  → Use @AuthedAccessUser
│   └── No (write/action endpoint)
│       └── Use @AuthedAccessUser
└── No → Is authentication optional?
    ├── Yes → Use @AccessUser
    └── No  → Don't use auth annotations
```
